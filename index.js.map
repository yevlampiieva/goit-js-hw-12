{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '36979931-b9ebd2c49fac6caefdf5e0dc3';\n\nasync function getImagesByQuery(query, page) {\n  const response = await axios.get(`https://pixabay.com/api/`, {\n    params: {\n      key: API_KEY,\n      q: query,\n      page,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  return response.data;\n}\n\nexport default getImagesByQuery;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet simplelightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nfunction createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=${largeImageURL}>\n      <div class=\"image-container\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </div>\n        <div class=\"image-inform\">\n          <div>\n            <h3 class=\"image-inform-title\">Likes</h3>\n            <span class=\"image-inform-text\">${likes}</span>\n          </div>\n          <div>\n            <h3 class=\"image-inform-title\">Views</h3>\n            <span class=\"image-inform-text\">${views}</span>\n          </div>\n          <div>\n            <h3 class=\"image-inform-title\">Comments</h3>\n            <span class=\"image-inform-text\">${comments}</span>\n          </div>\n          <div>\n            <h3 class=\"image-inform-title\">Downloads</h3>\n            <span class=\"image-inform-text\">${downloads}</span>\n          </div>\n        </div>\n      </a>\n    </li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  simplelightbox.refresh();\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction showLoadMoreButton() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nexport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport getImagesByQuery from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nlet searchImage = '';\nlet page = 1;\nlet limit = 15;\nlet totalPages = 1;\n\nform.addEventListener('submit', handleSearchImages);\nloadMoreBtn.addEventListener('click', handleLoadMoreImages);\n\nhideLoadMoreButton();\nhideLoader();\n\nasync function handleSearchImages(event) {\n  event.preventDefault();\n  clearGallery();\n  showLoader();\n  searchImage = event.target.elements['search-text'].value.trim();\n\n  if (!searchImage) {\n    iziToast.error({\n      message: 'Please enter some valid search value!',\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      messageColor: '#fafafb',\n      closeOnClick: true,\n      position: 'topRight',\n    });\n    hideLoader();\n    hideLoadMoreButton();\n    return;\n  }\n\n  try {\n    page = 1;\n    const data = await getImagesByQuery(searchImage, page);\n    if (data.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        messageColor: '#fafafb',\n        closeOnClick: true,\n        position: 'topRight',\n      });\n      hideLoader();\n      hideLoadMoreButton();\n      return;\n    }\n\n    createGallery(data.hits);\n\n    hideLoader();\n    form.reset();\n\n    if (data.hits.length < limit && totalPages === 1) {\n      hideLoadMoreButton();\n      iziToast.error({\n        message: `We're sorry, but you've reached the end of search results.`,\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        messageColor: '#fafafb',\n        closeOnClick: true,\n        position: 'topRight',\n      });\n    } else {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `Please try again later`,\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      messageColor: '#fafafb',\n      closeOnClick: true,\n      position: 'topRight',\n    });\n    hideLoader();\n    form.reset();\n  }\n}\n\nasync function handleLoadMoreImages() {\n  page += 1;\n  showLoader();\n  try {\n    const data = await getImagesByQuery(searchImage, page);\n    totalPages = Math.ceil(data.totalHits / limit);\n\n    if (page >= totalPages) {\n      hideLoadMoreButton();\n      iziToast.error({\n        message: `We're sorry, but you've reached the end of search results.`,\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        messageColor: '#fafafb',\n        closeOnClick: true,\n        position: 'topRight',\n      });\n    }\n\n    hideLoader();\n\n    createGallery(data.hits);\n\n    if (page > totalPages && data.hits.length <= limit) {\n      hideLoadMoreButton();\n    }\n\n    const image = document.querySelector('.gallery-item');\n    const imageHeight = image.getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: imageHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    iziToast.error({\n      message: `Please try again later`,\n      messageSize: '16px',\n      messageLineHeight: '24px',\n      messageColor: '#fafafb',\n      closeOnClick: true,\n      position: 'topRight',\n    });\n  }\n}\n"],"names":["API_KEY","getImagesByQuery","query","page","axios","loader","gallery","loadMoreBtn","simplelightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","searchImage","limit","totalPages","handleSearchImages","handleLoadMoreImages","event","iziToast","data","imageHeight"],"mappings":"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"}